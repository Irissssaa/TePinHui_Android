## ç‰¹å“æ±‡ Android å‰ç«¯è¡¥é½å¼€å‘æŠ¥å‘Šï¼ˆå¼ åœ¯ç‚«ï¼‰

> ç”¨äºæœŸæœ«æ±‡æŠ¥æ¢³ç†æ•´å¥—é€»è¾‘ï¼š**åç«¯æ•°æ®ä¸æ¥å£ â†’ å‰ç«¯é¡µé¢ä¸äº¤äº’ â†’ å…³é”®é—®é¢˜ä¸ä¿®å¤ â†’ éªŒæ”¶è„šæœ¬ä¸æ¼”ç¤ºé¡ºåº**ã€‚  
> ä»£ç ä»¥ `TePinHui_Android` å·¥ç¨‹ä¸ºå‡†ï¼›æ¥å£å¥‘çº¦ä»¥ `TePinHui_Backend/å¼€å‘æ—¥å¿—/API_CONTRACT.md` ä¸ºå‡†ã€‚

---

## ğŸ–¼ï¸ æ’å›¾å ä½æ¸…å•ï¼ˆç­”è¾©/è®ºæ–‡ç”¨ï¼‰
> è¯´æ˜ï¼šå°†æˆªå›¾ç»Ÿä¸€æ”¾åˆ° `images/`ï¼ˆæˆ–ä½ ä»¬æŒ‡å®šç›®å½•ï¼‰ï¼ŒæŒ‰ä¸‹é¢æ–‡ä»¶åå‘½åï¼Œæ’å…¥åˆ°è®ºæ–‡/æ±‡æŠ¥ PPT å¯¹åº”ä½ç½®å³å¯ã€‚

- ã€å›¾ F1ã€‘é¦–é¡µï¼ˆBanner + å•†å“åˆ—è¡¨ + å¿«æ·å…¥å£ï¼‰ï¼š`images/home.png`
- ã€å›¾ F2ã€‘åˆ†ç±»é¡µï¼ˆæŒ‰åœ°åŒºï¼‰ï¼š`images/category-region.png`
- ã€å›¾ F3ã€‘åˆ†ç±»é¡µï¼ˆæŒ‰å“ç±»ï¼‰ï¼š`images/category-category.png`
- ã€å›¾ F4ã€‘åˆ†ç±»é¡µåœ°å›¾å…¥å£ï¼ˆçœä»½é€‰æ‹©ï¼‰ï¼š`images/category-map.png`
- ã€å›¾ F5ã€‘åœ°å›¾é¡µï¼ˆç‚¹å‡»çœä»½ï¼‰ï¼š`images/map.png`
- ã€å›¾ F6ã€‘çœä»½ç‰¹äº§åˆ—è¡¨é¡µï¼š`images/map-products.png`
- ã€å›¾ F7ã€‘å•†å“è¯¦æƒ…ï¼ˆå†…å®¹åŒ–å­—æ®µ + æ•…äº‹å…¥å£ï¼‰ï¼š`images/product-detail.png`
- ã€å›¾ F8ã€‘æ•…äº‹åˆ—è¡¨/è¯¦æƒ…ï¼ˆå«ç›¸å…³ç‰¹äº§ï¼‰ï¼š`images/story-list.png`ã€`images/story-detail.png`
- ã€å›¾ F9ã€‘ç¤¾åŒºä¸‰æ¿å—ï¼ˆHOT/RECOMMEND/HELPï¼‰ï¼š`images/community-hot.png`ã€`images/community-recommend.png`ã€`images/community-help.png`
- ã€å›¾ F10ã€‘å‘å¸–ï¼ˆé€‰å›¾/é¢„è§ˆ/å‘å¸ƒï¼‰ï¼š`images/post-publish.png`
- ã€å›¾ F11ã€‘å¸–å­è¯¦æƒ…ï¼ˆè¯„è®ºæ¥¼ä¸­æ¥¼ + ç‚¹èµï¼‰ï¼š`images/post-detail.png`
- ã€å›¾ F12ã€‘è´­ç‰©è½¦/è®¢å•ï¼š`images/cart.png`ã€`images/orders.png`
- ã€å›¾ F13ã€‘ä¸ªäººä¸­å¿ƒï¼š`images/mine.png`

---

## ä¸€ã€æ•´ä½“æ¶æ„ä¸å·¥ç¨‹åˆ†å±‚

### 1) æŠ€æœ¯æ ˆ
- **Android**ï¼šActivity / Fragment + RecyclerView
- **ç½‘ç»œè¯·æ±‚**ï¼šOkHttp + Gsonï¼ˆç»Ÿä¸€å°è£…åœ¨ `NetworkUtils`ï¼‰
- **å›¾ç‰‡åŠ è½½**ï¼šGlideï¼ˆå•†å“ä¸»å›¾ / æ•…äº‹å°é¢ / å¸–å­å›¾ç‰‡ / å¤´åƒï¼‰
- **æ•°æ®ç»“æ„**ï¼š`Result<T>` ç»Ÿä¸€å“åº” + DTO å¯¹é½åç«¯å­—æ®µ

### 2) ä»£ç åˆ†å±‚ï¼ˆæ±‡æŠ¥è¦ç‚¹ï¼šèŒè´£æ¸…æ™°ï¼‰
- **UI é¡µé¢å±‚**ï¼š`app/src/main/java/com/example/tepinhui/ui/**`
- **ç½‘ç»œå±‚**ï¼š`app/src/main/java/com/example/tepinhui/NetworkUtils.java`
  - ç»Ÿä¸€ `get/post` æ–¹æ³•
  - æ”¯æŒ `TypeToken` æ³›å‹ååºåˆ—åŒ–
  - æ”¯æŒæºå¸¦ `Authorization: Bearer <token>`
- **API Serviceï¼ˆå¯é€‰å°è£…ï¼‰**ï¼š`app/src/main/java/com/example/tepinhui/network/*ApiService.java`
  - ä¾‹å¦‚ `UserApiService.getToken(context)` ç»Ÿä¸€ä» SharedPreferences å– token
- **DTO**ï¼š`app/src/main/java/com/example/tepinhui/dto/**`

### 3) Base URLï¼ˆè”è°ƒæœ€å…³é”®ç‚¹ï¼‰
æ–‡ä»¶ï¼š`TePinHui_Android/app/src/main/java/com/example/tepinhui/NetworkUtils.java`
- **çœŸæœºè”è°ƒ**ï¼š`BASE_URL` å¿…é¡»æ”¹ä¸ºåç«¯éƒ¨ç½²æœºå™¨çš„ IPï¼ˆåŒç½‘æ®µå¯è¾¾ï¼‰
- **æ¨¡æ‹Ÿå™¨è”è°ƒ**ï¼šé€šå¸¸ä½¿ç”¨ `http://10.0.2.2:8080`
- Manifest å…è®¸ HTTPï¼š`android:usesCleartextTraffic="true"`

> ã€æˆªå›¾å ä½ã€‘å»ºè®®è¡¥ä¸€å¼  NetworkUtils BASE_URL é…ç½®æˆªå›¾ï¼ˆä¾¿äºç­”è¾©è§£é‡Šâ€œä¸ºä½•çœŸæœºèƒ½è®¿é—®åç«¯â€ï¼‰
> - æ–‡ä»¶åå»ºè®®ï¼š`images/network-baseurl.png`

---

## äºŒã€é¡µé¢å…¥å£ä¸è·¯ç”±ï¼ˆä» Manifest åˆ°ç”¨æˆ·è·¯å¾„ï¼‰

æ–‡ä»¶ï¼š`TePinHui_Android/app/src/main/AndroidManifest.xml`
- **ä¸»ç•Œé¢**ï¼š`MainActivity`ï¼ˆåº•éƒ¨å¯¼èˆªå®¹å™¨ï¼‰
- **ç™»å½•/æ³¨å†Œ**ï¼š`LoginActivity`ã€`RegisterActivity`
- **å•†å“é“¾è·¯**ï¼š`ProductDetailActivity`
- **åˆ†ç±»é¡µ**ï¼š`CategoryActivity`
- **æ•…äº‹é“¾è·¯**ï¼š`StoryListActivity`ã€`StoryDetailActivity`
- **ç¤¾åŒºé“¾è·¯**ï¼š`PostPublishActivity`ã€`PostDetailActivity`ã€`HelpDetailActivity`
- **åœ°å›¾é“¾è·¯ï¼ˆåœ°åŒºå…¥å£å¢å¼ºï¼‰**ï¼š`ProvinceMapActivity`ã€`ProvinceProductsActivity`ï¼ˆåˆ†ç±»é¡µé¡¶éƒ¨â€œåœ°å›¾â€å…¥å£ï¼‰

> æ±‡æŠ¥å»ºè®®ï¼šæŒ‰â€œç”¨æˆ·ä½¿ç”¨è·¯å¾„â€è®²â€”â€”ç™»å½• â†’ é¦–é¡µçœ‹å•†å“ â†’ åˆ†ç±»ç­›é€‰ â†’ å•†å“è¯¦æƒ…/æ•…äº‹ â†’ ç¤¾åŒºå‘å¸–/è¯„è®º/ç‚¹èµã€‚

---

## ä¸‰ã€å•†å“æ¨¡å—ï¼šé¦–é¡µ / åˆ†ç±» / è¯¦æƒ… / æ•…äº‹ï¼ˆå®Œæ•´é—­ç¯ï¼‰

### 1) é¦–é¡µ Homeï¼ˆBanner + å•†å“åˆ—è¡¨ + å¿«æ·å…¥å£ï¼‰
**é¡µé¢ç±»**ï¼š`ui/home/HomeFragment.java`

**æ¥å£å¯¹æ¥**
- `GET /api/banners`ï¼šBanner åˆ—è¡¨
- `GET /api/products?page=1&size=10`ï¼šé¦–é¡µå•†å“åˆ—è¡¨

**æ•°æ®æµ**
- `loadBanners()` â†’ `NetworkUtils.get("/api/banners")` â†’ `BannerAdapter` åˆ·æ–°
- `loadProducts()` â†’ `NetworkUtils.get("/api/products?...")` â†’ `ProductAdapter` åˆ·æ–°

**å…¥å£**
- åˆ†ç±»ï¼šè·³è½¬ `CategoryActivity`
- æ•…äº‹ï¼šè·³è½¬ `StoryListActivity`
- æœç´¢ï¼šè·³è½¬ `SearchActivity`ï¼ˆå·²å®ç°çœŸå®æœç´¢ï¼šè¯·æ±‚ `/api/products?keyword=...`ï¼Œå±•ç¤ºç»“æœä¸ç©ºæ€ï¼‰

---

### 2) åˆ†ç±» Categoryï¼ˆæŒ‰åœ°åŒº/æŒ‰å“ç±»ï¼šåŒç»´åº¦ç­›é€‰ï¼‰
**é¡µé¢ç±»**ï¼š`ui/category/CategoryActivity.java`

**èƒŒæ™¯é—®é¢˜ï¼ˆä¸ºä»€ä¹ˆè¦è¡¥é½ï¼‰**
- æ—©æœŸåªå±•ç¤ºé™æ€â€œçœä»½/åˆ†ç±»â€ï¼Œç‚¹å‡»åä»è¯·æ±‚å…¨é‡å•†å“ï¼Œå¯¼è‡´â€œç‚¹å“ªä¸ªéƒ½ä¸€æ ·/çœä»½æ··ä¹±â€ã€‚
- ç°åœ¨æ”¹ä¸ºï¼šå…ˆæ‹‰åç«¯æ ‡å‡†åŒ–ç»´åº¦ï¼ˆåœ°åŒº/å“ç±»å¸¦ idï¼‰ï¼Œå†æŠŠ `regionId/categoryId` ä½œä¸ºå‚æ•°è¯·æ±‚å•†å“åˆ—è¡¨ï¼Œå®ç° **SQL å±‚è¿‡æ»¤**ã€‚

**æ¥å£å¯¹æ¥**
- `GET /api/regions`ï¼šåœ°åŒºåˆ—è¡¨ï¼ˆRegionDTOï¼š`id/name`ï¼‰
- `GET /api/categories`ï¼šå“ç±»åˆ—è¡¨ï¼ˆCategoryDTOï¼š`id/name`ï¼‰
- `GET /api/products?page=1&size=20&regionId=?&categoryId=?`ï¼šç­›é€‰å•†å“ï¼ˆå‚æ•°å¯ç©ºï¼‰

**å…³é”®å®ç°ç‚¹**
- å·¦ä¾§åˆ—è¡¨åœ¨ä¸¤ç§æ¨¡å¼åˆ‡æ¢ï¼š`isRegionMode`
- å·¦ä¾§ç‚¹å‡»é¡¹ï¼š
  - åœ°åŒºæ¨¡å¼ï¼šname â†’ regionId â†’ `loadProducts(regionId, null)`
  - å“ç±»æ¨¡å¼ï¼šname â†’ categoryId â†’ `loadProducts(null, categoryId)`
- å…œåº•ç­–ç•¥ï¼šæ¥å£å¤±è´¥æ—¶ä»æ˜¾ç¤ºé™æ€åˆ—è¡¨ï¼ˆä¿è¯æ¼”ç¤ºä¸å´©ï¼‰

#### âœ… åœ°å›¾å…¥å£ï¼ˆè¡¥å›ï¼‰
> ç°çŠ¶ï¼šåˆ†ç±»é¡µé¡¶éƒ¨æ–°å¢â€œåœ°å›¾â€æŒ‰é’®ï¼Œç‚¹å‡»è¿›å…¥ç¦»çº¿åœ°å›¾ï¼ˆWebView åŠ è½½ assets HTMLï¼‰ï¼Œç‚¹å‡»çœä»½åè·³åˆ°â€œçœä»½ç‰¹äº§åˆ—è¡¨â€é¡µã€‚

- **å…¥å£ä½ç½®**ï¼š`res/layout/activity_category.xml` ä¸­ `@id/btn_map`
- **åœ°å›¾é¡µ**ï¼š`ui/story/ProvinceMapActivity.java`
- **çœä»½ç‰¹äº§é¡µ**ï¼š`ui/story/ProvinceProductsActivity.java`
- **ç¦»çº¿èµ„æº**ï¼š`app/src/main/assets/china_province_map.html` + `china_provinces.svg` + `d3.min.js` ç­‰

> ã€æˆªå›¾å ä½ã€‘åˆ†ç±»é¡µåœ°å›¾å…¥å£ä¸åœ°å›¾é¡µ
> - `images/category-map.png`
> - `images/map.png`
> - `images/map-products.png`

---

### 3) å•†å“è¯¦æƒ… ProductDetailï¼ˆå†…å®¹åŒ–å­—æ®µ + åŠ å…¥è´­ç‰©è½¦ + è¿›å…¥æ•…äº‹ï¼‰
**é¡µé¢ç±»**ï¼š`ui/product/ProductDetailActivity.java`

**æ¥å£å¯¹æ¥**
- `GET /api/products/{id}`ï¼šè¯¦æƒ…ï¼ˆå« `shortIntro/cultureNote/storyId` ç­‰å†…å®¹åŒ–å­—æ®µï¼‰
- `POST /api/cart/items`ï¼šåŠ å…¥è´­ç‰©è½¦ï¼ˆéœ€ç™»å½• tokenï¼‰

**å…³é”®äº¤äº’**
- **åŠ å…¥è´­ç‰©è½¦**ï¼šç‚¹å‡»æŒ‰é’® â†’ token æ ¡éªŒ â†’ POST `/api/cart/items`
- **ç‰¹äº§æ•…äº‹å…¥å£ï¼ˆè¡¥é½é¡¹ï¼‰**ï¼š
  - è‹¥ `storyId != null`ï¼šæ˜¾ç¤ºå…¥å£å¹¶å¯ç‚¹å‡»
  - ç‚¹å‡»åè·³è½¬ `StoryDetailActivity` å¹¶ä¼  `storyId`

---

### 4) æ•…äº‹ Storiesï¼ˆåˆ—è¡¨ + è¯¦æƒ… + å…³è”å•†å“ï¼‰
**é¡µé¢ç±»**
- `ui/story/StoryListActivity.java`
- `ui/story/StoryDetailActivity.java`

**æ¥å£å¯¹æ¥**
- `GET /api/stories`ï¼šæ•…äº‹åˆ—è¡¨ï¼ˆ`id/title/coverUrl`ï¼‰
- `GET /api/stories/{id}`ï¼šæ•…äº‹è¯¦æƒ…ï¼ˆ`title/content/coverUrl + products[]`ï¼‰

**é—­ç¯**
- å•†å“è¯¦æƒ… â†’ æ•…äº‹è¯¦æƒ…ï¼ˆstoryIdï¼‰
- æ•…äº‹è¯¦æƒ… â†’ ç›¸å…³å•†å“æ¨ªå‘åˆ—è¡¨ â†’ å•†å“è¯¦æƒ…ï¼ˆå½¢æˆâ€œå†…å®¹åŒ–â€é—­ç¯ï¼Œæ»¡è¶³â€œæ–‡åŒ–æ•…äº‹â€å–ç‚¹ï¼‰

> ã€æˆªå›¾å ä½ã€‘æ•…äº‹åˆ—è¡¨/è¯¦æƒ…/ç›¸å…³ç‰¹äº§
> - `images/story-list.png`
> - `images/story-detail.png`

---

## å››ã€ç¤¾åŒºæ¨¡å—ï¼šå¸–å­åˆ—è¡¨ / å‘å¸– / è¯¦æƒ… / è¯„è®ºå›å¤ / ç‚¹èµ / å›¾ç‰‡ä¸å¤´åƒ

### 1) ä¸‰ä¸ªæ¿å—ï¼ˆçƒ­é—¨/æ¨è/äº’åŠ©ï¼‰å¿…é¡»æ•°æ®éš”ç¦»
**é¡µé¢ç±»**
- `ui/community/HotFragment.java`
- `ui/community/RecommendFragment.java`
- `ui/community/HelpFragment.java`

**æ¥å£å¯¹æ¥**
- `GET /api/community/posts?source=HOT|RECOMMEND|HELP&page=1&size=10`

**éªŒæ”¶ç‚¹ï¼ˆæœŸæœ«å¿…è®²ï¼‰**
- ä¸‰ä¸ª tab çš„å¸–å­å¿…é¡»ä¸åŒï¼šé€šè¿‡ `source` å‚æ•°å®ç°éš”ç¦»
- `onResume()` è‡ªåŠ¨åˆ·æ–°ï¼šå‘å¸–/ç‚¹èµ/è¯„è®ºè¿”å›åï¼Œè®¡æ•°ä¸åˆ—è¡¨èƒ½ç«‹å³æ›´æ–°

> ã€æ³¨æ„ã€‘å¦‚æœâ€œæœ¬å‘¨çƒ­ç‚¹æ²¡å†…å®¹â€ï¼Œé€šå¸¸æ˜¯æ•°æ®åº“ `community_posts` ç¼ºå°‘ `source='HOT'` çš„è®°å½•ï¼›è¿™ä¸æ˜¯å‰ç«¯é€»è¾‘é—®é¢˜ã€‚å¯ç”¨åç«¯ SQL/è„šæœ¬è¡¥ç§ã€‚

---

### 2) å‘å¸– PostPublishï¼ˆå¯¹é½åç«¯å…¥å‚ï¼‰
**é¡µé¢ç±»**ï¼š`ui/community/PostPublishActivity.java`

**æ¥å£å¯¹æ¥**
- `POST /api/community/posts`
- bodyï¼š`{ content, images, source }`
- âœ… å·²è¡¥é½å‘å¸–å›¾ç‰‡ï¼šå…ˆä¸Šä¼ å›¾ç‰‡å¾—åˆ° URL åˆ—è¡¨ï¼Œå†å‘å¸–æºå¸¦ `images[]`
- `POST /api/upload`ï¼ˆmultipart ä¸Šä¼ ï¼Œå­—æ®µå `file`ï¼Œè¿”å› `Result<String>`ï¼Œdata ä¸ºå›¾ç‰‡ URLï¼‰

**äº¤äº’ç»†èŠ‚**
- æœªç™»å½•ä¸å…è®¸å‘å¸–ï¼ˆtoken æ ¡éªŒï¼‰
- é˜²è¿ç‚¹ï¼šè¯·æ±‚æœŸé—´ç¦ç”¨æŒ‰é’®
- æˆåŠŸå `finish()` è¿”å›åˆ—è¡¨é¡µï¼›åˆ—è¡¨é¡µ `onResume()` è‡ªåŠ¨åˆ·æ–°

**å›¾ç‰‡é€‰æ‹©/é¢„è§ˆ/ä¸Šä¼ æµç¨‹ï¼ˆæœŸæœ«å¯ç›´æ¥ç…§ç€è®²ï¼‰**
- é€‰å›¾ï¼šç‚¹å‡»â€œğŸ“· æ·»åŠ å›¾ç‰‡ï¼ˆæœ€å¤š 9 å¼ ï¼‰â€ï¼Œç³»ç»Ÿç›¸å†Œå¤šé€‰ï¼ˆ`GetMultipleContents("image/*")`ï¼‰
- é¢„è§ˆï¼šä¸‹æ–¹ 3 åˆ—ç½‘æ ¼é¢„è§ˆå·²é€‰å›¾ç‰‡ï¼Œå¯ç‚¹å‡» â€œÃ—â€ åˆ é™¤æŸå¼ 
- å‘å¸ƒï¼š
  - è‹¥æœªé€‰å›¾ï¼šç›´æ¥è¯·æ±‚ `POST /api/community/posts`
  - è‹¥å·²é€‰å›¾ï¼šé€å¼ ä¸Šä¼  `POST /api/upload` â†’ æ‹¿åˆ° URL åˆ—è¡¨ â†’ å†è¯·æ±‚ `POST /api/community/posts`ï¼Œbody.images = URL æ•°ç»„
- æ–‡ä»¶ä¸ç»„ä»¶ï¼š
  - å¸ƒå±€ï¼š`res/layout/activity_post_publish.xml`ã€`res/layout/item_selected_image.xml`
  - é€‚é…å™¨ï¼š`ui/community/SelectedImageAdapter.java`
  - ä¸Šä¼ å°è£…ï¼š`NetworkUtils.uploadImage(...)`ï¼ˆmultipartï¼‰

---

### 3) å¸–å­è¯¦æƒ… PostDetailï¼ˆè¯¦æƒ… + è¯„è®ºåˆ—è¡¨ + å›å¤æ¥¼ä¸­æ¥¼ + ç‚¹èµï¼‰
**é¡µé¢ç±»**ï¼š`ui/community/PostDetailActivity.java`

**æ¥å£å¯¹æ¥**
- `GET /api/community/posts/{postId}`ï¼šåˆ·æ–°å¸–å­è¯¦æƒ…ï¼ˆlikeCount/commentCount/å›¾ç‰‡ç­‰ï¼‰
- `GET /api/community/posts/{postId}/comments`ï¼šè¯„è®ºåˆ—è¡¨ï¼ˆ`parentId + replyToUser`ï¼‰
- `POST /api/community/posts/{postId}/comments`ï¼šå‘è¯„è®º/å‘å›å¤ï¼ˆ`{ content, parentId }`ï¼‰
- `POST /api/community/posts/{postId}/like`ï¼šå¸–å­ç‚¹èµï¼ˆéœ€ç™»å½•ï¼‰
- `POST /api/community/comments/{commentId}/like`ï¼šè¯„è®ºç‚¹èµï¼ˆéœ€ç™»å½•ï¼‰

**UI ç»„ç»‡æ–¹å¼**
- é‡‡ç”¨ `ConcatAdapter`ï¼š
  - Headerï¼š`PostHeaderAdapter`ï¼ˆä½œè€…ã€æ­£æ–‡ã€é…å›¾ã€èµæ•°ã€è¯„è®ºæ•°ï¼‰
  - è¯„è®ºåˆ—è¡¨ï¼š`CommentAdapter`
- ä¼˜ç‚¹ï¼šheader ä¸è¯„è®ºåŒä¸€ä¸ª RecyclerViewï¼Œæ»šåŠ¨è‡ªç„¶

**å›å¤ï¼ˆæ¥¼ä¸­æ¥¼ï¼‰**
- ç‚¹å‡»æŸæ¡è¯„è®ºï¼šè¿›å…¥â€œå›å¤æ¨¡å¼â€
  - è®°å½• `replyParentId` + `replyToUser`
  - è¾“å…¥æ¡†æç¤ºå˜ä¸º `å›å¤ @xxx`
- å‘é€æˆåŠŸåï¼šæ¸…ç©ºè¾“å…¥ã€é€€å‡ºå›å¤æ¨¡å¼ã€åˆ·æ–°å¸–å­è¯¦æƒ…ä¸è¯„è®ºåˆ—è¡¨

**ç‚¹èµï¼ˆè¡¥é½é¡¹ï¼‰**
- å¸–å­ç‚¹èµï¼šç‚¹å‡» header çš„â€œèµ Xâ€
  - å…ˆåšä¹è§‚ +1ï¼Œå†è¯·æ±‚åç«¯
  - è‹¥å¤±è´¥åˆ™å›æ‹‰è¯¦æƒ…çº æ­£
- è¯„è®ºç‚¹èµï¼šé•¿æŒ‰è¯„è®ºï¼ˆé¿å…å ç”¨â€œç‚¹å‡»=å›å¤â€ï¼‰
  - å…ˆåšä¹è§‚ +1ï¼Œå†è¯·æ±‚åç«¯
  - è‹¥å¤±è´¥åˆ™å›æ‹‰è¯„è®ºåˆ—è¡¨çº æ­£

---

### 4) å¤´åƒä¸å›¾ç‰‡åŠ è½½ç­–ç•¥ï¼ˆå¯è®²â€œæ— åç«¯å¤´åƒä¹Ÿèƒ½æ¼”ç¤ºâ€ï¼‰
**å¤´åƒ**
- DTO æ”¯æŒ `avatarUrl`ï¼›åç«¯å½“å‰å¯èƒ½è¿”å› `null`
- å‰ç«¯å…œåº•ï¼š`AvatarUtil.forUser(userName)` å®ç°â€œéšæœºä½†å›ºå®šâ€çš„æœ¬åœ°å¤´åƒ
- æ¸²æŸ“ä¼˜å…ˆçº§ï¼š
  1) `avatarUrl` éç©º â†’ Glide ç½‘ç»œåŠ è½½
  2) å¦åˆ™ â†’ æœ¬åœ°å¤´åƒèµ„æº id

**å¸–å­å›¾ç‰‡**
- DTO æ”¯æŒ `images: List<String>`
- å½“å‰ UI å…ˆå±•ç¤ºç¬¬ä¸€å¼ ï¼ˆåç»­å¯æ‰©å±•ä¹å®«æ ¼ï¼‰

---

## äº”ã€å…³é”®é—®é¢˜ä¸ä¿®å¤è®°å½•ï¼ˆç”¨äºç­”è¾©é—®ç­”ï¼‰

### 1) â€œç‚¹å“ªä¸ªåˆ†ç±»éƒ½ä¸€æ · / çœä»½æ··ä¹±â€
- åŸå› ï¼šå‰ç«¯æ²¡ä¼  `regionId/categoryId`ï¼Œåªæ‹‰å…¨é‡å•†å“
- ä¿®å¤ï¼š`CategoryActivity` å…ˆæ‹‰ `regions/categories`ï¼Œå†å¸¦ id è¯·æ±‚ `/api/products?...&regionId=&categoryId=`

### 2) ç¤¾åŒºæ¿å—ä¸²å° / è¯„è®ºä¸²å°
- åŸå› ï¼šè¯·æ±‚æœªæŒ‰ `source/postId` éš”ç¦»
- ä¿®å¤ï¼šåˆ—è¡¨æŒ‰ `source` æ‹‰ï¼›è¯„è®ºæŒ‰ `/posts/{postId}/comments` æ‹‰

### 3) ç‚¹èµåªåœ¨æœ¬åœ°å˜åŒ–
- åŸå› ï¼šUI å±‚æ²¡æœ‰æ¥ç‚¹èµæ¥å£
  - ä¿®å¤ï¼šå¸–å­ç‚¹èµå¯¹æ¥ `POST /api/community/posts/{postId}/like`ï¼›è¯„è®ºç‚¹èµå¯¹æ¥ `POST /api/community/comments/{commentId}/like`

### 4) è´­ç‰©è½¦æ¥å£ä¸é€šï¼ˆå‰ç«¯å·²åšï¼Œä½†åç«¯ç¼ºå£ï¼‰
- ç°çŠ¶ï¼šå‰ç«¯å·²è°ƒç”¨
  - `GET /api/cart`ï¼ˆè´­ç‰©è½¦é¡µï¼‰
  - `POST /api/cart/items`ï¼ˆå•†å“è¯¦æƒ…â€œåŠ å…¥è´­ç‰©è½¦â€ï¼‰
- ä¿®å¤ï¼šåç«¯å·²è¡¥é½å¹¶å…¼å®¹ï¼ˆæ— éœ€æ”¹å‰ç«¯ï¼‰ï¼Œç¡®ä¿æ¼”ç¤ºå¯ç”¨

### 5) æ”¶è—/è¶³è¿¹/æ¶ˆæ¯éƒ¨åˆ†æ¥å£è·¯å¾„ä¸ä¸€è‡´
- ç°çŠ¶ï¼šå‰ç«¯å­˜åœ¨å…¼å®¹å†™æ³•ï¼ˆå¦‚ `GET .../delete`ã€`batch-delete`ã€`check`ã€`batch-read`ï¼‰
- ä¿®å¤ï¼šåç«¯å·²è¡¥é½æ‰€æœ‰ç¼ºå£æ¥å£ï¼Œå‰ç«¯æ— éœ€æ”¹åŠ¨å³å¯è·‘é€š

### 6) ç¤¾åŒºåŠ è½½æ…¢å¯¼è‡´â€œçœ‹èµ·æ¥æ²¡æ•°æ®â€
- ç°è±¡ï¼šåç«¯å“åº”æ…¢æ—¶ï¼Œå‰ç«¯ 10s è¶…æ—¶ â†’ åˆ—è¡¨é¡µç©ºç™½ï¼ˆå°¤å…¶ Hot/Recommend ä¹‹å‰åæ‰ onErrorï¼‰
- å¤„ç†ï¼šæœ¬åœ°è°ƒè¯•å·²åŠ å…¥è¶…æ—¶æ”¾å®½ä¸æ›´å°åˆ†é¡µ size çš„å…œåº•ï¼Œå¹¶åœ¨åˆ—è¡¨é¡µæç¤ºé”™è¯¯åŸå› 
- è¯´æ˜ï¼šè¯¥ä¼˜åŒ–å±äºâ€œä½“éªŒå¢å¼ºâ€ï¼Œå¦‚éœ€åˆå…¥ä¸»åˆ†æ”¯å†ç»Ÿä¸€å¤„ç†å†²çªä¸åˆå¹¶ç­–ç•¥
- ä¿®å¤ï¼šå¯¹é½åç«¯ï¼š
  - å¸–å­ç‚¹èµï¼š`POST /api/community/posts/{postId}/like`
  - è¯„è®ºç‚¹èµï¼š`POST /api/community/comments/{commentId}/like`

### 7) â€œçƒ­ç‚¹å…¥å£è·³è½¬ä¸ç¨³å®šâ€ï¼ˆå·²ä¿®å¤ï¼‰
- ç°è±¡ï¼šä»é¦–é¡µç‚¹â€œæœ¬å‘¨çƒ­ç‚¹â€æœ‰æ—¶ä¸åˆ‡åˆ°ç¤¾åŒº Tabï¼Œæˆ–é‡å¤åˆ›å»º MainActivityã€‚
- ä¿®å¤æ€è·¯ï¼šåœ¨ `MainActivity` å¢åŠ  `onNewIntent()` + `handleIntent()`ï¼Œå¹¶åœ¨å¯åŠ¨ MainActivity æ—¶å¢åŠ  `CLEAR_TOP|SINGLE_TOP`ï¼Œä¿è¯ Activity å¤ç”¨æ—¶ä¹Ÿèƒ½æ­£ç¡®æ¶ˆè´¹å‚æ•°å¹¶åˆ‡æ¢ Tabã€‚
- ç›¸å…³ä»£ç ï¼š
  - `MainActivity`ï¼šå¤„ç† `target_tab=community` + `community_tab=0`
  - `HomeFragment`ï¼šå¯åŠ¨ MainActivity æ—¶åŠ  flags

> ã€æˆªå›¾å ä½ã€‘çƒ­ç‚¹å…¥å£ï¼ˆé¦–é¡µæŒ‰é’® â†’ ç¤¾åŒºçƒ­ç‚¹ï¼‰
> - `images/hot-entry.png`
> - `images/community-hot.png`

---

## å…­ã€æœŸæœ«æ¼”ç¤ºè„šæœ¬ï¼ˆå»ºè®®é¡ºåºï¼‰

### 1) æ¼”ç¤ºå‰å‡†å¤‡
- åç«¯æœåŠ¡å¯è®¿é—®ï¼ˆåŒç½‘æ®µå¯è¾¾ï¼‰
- `NetworkUtils.BASE_URL` å·²æ”¹ä¸ºå½“å‰åç«¯åœ°å€

### 2) æ¼”ç¤ºæµç¨‹ï¼ˆ10~15 åˆ†é’Ÿç‰ˆæœ¬ï¼‰
- ç™»å½•/æ³¨å†Œ â†’ è¿›å…¥ä¸»ç•Œé¢
- é¦–é¡µï¼šBanner + å•†å“åˆ—è¡¨åŠ è½½æ­£å¸¸
- åˆ†ç±»ï¼šåˆ‡æ¢â€œæŒ‰åœ°åŒº/æŒ‰å“ç±»â€ï¼Œç‚¹å‡»å·¦ä¾§é¡¹ï¼Œå³ä¾§å•†å“å˜åŒ–ï¼ˆè¯æ˜ SQL è¿‡æ»¤ï¼‰
- åˆ†ç±»ï¼šç‚¹å‡»â€œåœ°å›¾â€ï¼Œé€‰æ‹©çœä»½ï¼Œè¿›å…¥çœä»½ç‰¹äº§åˆ—è¡¨ï¼ˆåœ°åŒºå…¥å£ç‰¹è‰²ï¼‰
- å•†å“è¯¦æƒ…ï¼šå†…å®¹åŒ–å­—æ®µå±•ç¤ºï¼›åŠ å…¥è´­ç‰©è½¦ï¼›è‹¥æœ‰æ•…äº‹å¯è·³æ•…äº‹è¯¦æƒ…
- æ•…äº‹ï¼šåˆ—è¡¨ â†’ è¯¦æƒ… â†’ ç›¸å…³å•†å“ï¼ˆé—­ç¯ï¼‰
- ç¤¾åŒºï¼š
  - ä¸‰ä¸ªæ¿å—å†…å®¹ä¸åŒï¼ˆHOT/RECOMMEND/HELPï¼‰
  - å‘å¸– â†’ è¿”å›ç«‹å³åˆ·æ–°
  - è¿›å…¥å¸–å­è¯¦æƒ…ï¼šè¯„è®º/å›å¤æ¥¼ä¸­æ¥¼/ç‚¹èµï¼ˆå¸–å­&è¯„è®ºï¼‰

---

## ä¸ƒã€APK æ‰“åŒ…

åœ¨ `TePinHui_Android` ç›®å½•æ‰§è¡Œï¼š
```bash
.\gradlew.bat assembleDebug
```
è¾“å‡ºï¼š`app/build/outputs/apk/debug/app-debug.apk`

---

## å…«ã€é™„ï¼šä¸€é¡µå¼â€œé¡µé¢â€”æ¥å£â€”æ•°æ®â€é€ŸæŸ¥è¡¨ï¼ˆç°åœºç­”è¾©å¤‡ç”¨ï¼‰
| é¡µé¢/åŠŸèƒ½ | Android å…¥å£ç±» | å…³é”®æ¥å£ | å…³é”®å­—æ®µ/éªŒæ”¶ç‚¹ |
|---|---|---|---|
| é¦–é¡µå•†å“åˆ—è¡¨ | `HomeFragment` | `GET /api/products?page&size` | åˆ—è¡¨å¯æ»šåŠ¨ã€ç‚¹è¿›è¯¦æƒ… |
| åˆ†ç±»ï¼ˆåœ°åŒº/å“ç±»ï¼‰ | `CategoryActivity` | `GET /api/regions` / `GET /api/categories` / `GET /api/products?regionId&categoryId` | **SQL å±‚è¿‡æ»¤**ï¼Œç‚¹å“ªä¸ªéƒ½ä¸ä¸€æ · |
| åœ°å›¾é€‰çœä»½ | `ProvinceMapActivity` / `ProvinceProductsActivity` | `GET /api/products`ï¼ˆå‰ç«¯æŒ‰ origin è¿‡æ»¤ï¼‰ | åœ°å›¾å¯ç‚¹ã€çœä»½å¯è·³è½¬ |
| å•†å“è¯¦æƒ… | `ProductDetailActivity` | `GET /api/products/{id}` / `POST /api/cart/items` | `shortIntro/cultureNote/storyId` |
| æ•…äº‹è¯¦æƒ… | `StoryDetailActivity` | `GET /api/stories/{id}` | `products[]` æ¨ªå‘åˆ—è¡¨ |
| ç¤¾åŒºä¸‰æ¿å— | `Hot/Recommend/HelpFragment` | `GET /api/community/posts?source=...` | ä¸‰æ¿å—éš”ç¦» |
| å¸–å­è¯¦æƒ…/è¯„è®º | `PostDetailActivity` | `GET /posts/{id}` / `GET/POST /comments` | æ¥¼ä¸­æ¥¼ã€ç‚¹èµå¹‚ç­‰ |
